- #### 终端前缀

  - 用户名@host: 目录 $/#: 如果是超级管理员身份登录，则为#,否则为$

- #### 关机命令

  - shutdown now:正常关机
  - halt:关闭内存
  - init 0:版本可能不支持

- #### linux一切皆文件

  - ###### 本身是一个基于文件形式表示的操作系统

- #### 比较重要的文件夹

  ![image-20200929190041271](D:\notes\随笔\note-imgs\image-20200929190041271.png)

  - bin: 主要存放可执行的二进制文件
  - dev: 主要存放外接设备，这些设备不能够直接被使用，需要挂载
    - 挂载：分配盘符
  - etc: 存放一些配置文件
  - home: 类似于win的用户目录（存放除了root外的用户)
  - proc: process,表示进程，存储linux运行时的进程
  - root: root用户自家的home目录，不过是root用户专用的
  - sbin: super binary, 也是主要存放可执行的二进制文件，但是必须要有super权限的用户才能执行
  - tmp: 存储系统运行时的临时文件
  - usr: 存放用户自己安装的软件
  - var: 存放日志文件的目录
  - mnt: 当外接设备需要挂载的时候，就要挂载到mnt目录下

```
//P14 0:00 ----2020年9月29日19:15:06
```

- ##### linux标准的指令格式： 指令  [选项]  [操作对象]

  - 选项和操纵对象都可以是多个

- #### 基础命令

  - ls:

    - 无选项和操作对象：列出当前目录下所有文件和文件夹的名称
    - ls 路径：列出指定路径下的所有文件和文件夹的名称
    - ls 选项 路径：列出指定路径下的所有文件和文件夹的名称，并以指定格式来显示
      - -l：表示以列表的形式进行显示
        - 显示格式：权限 【】 用户 用户组 项大小 月份 日期 时间 名称
      - -a：显示所有的文件和文件夹，包含隐藏文件和文件夹，隐藏项名一般以.开头
      - -la：显示所有的文件和文件夹，包含隐藏文件和文件夹，以列表形式显示
      - -lh：显示所有的文件和文件夹，以列表形式，以可读性较高的形式显示
      - -lah：显示所有的文件和文件夹，包含隐藏文件和文件夹，以列表形式，以可读性较高的形式显示
    - 列出项的颜色：
      - 蓝色字体：文件夹
      - 绿色填充：拥有所有权限

  - pwd:

    - 无参数
    - 含义：print working directory
    - 显示当前工作目录

  - cd:

    - 含义：change directroy
    - 切换当前目录
    - cd 路径

  - mkdir:

    - 含义：make directory
    - 创建目录
    - 语法：
      - mkdir 路径：可以是相对路径或绝对路径
      - mkdir -p 路径：可以实现多层目录的创建
      - mkdir 路径1 路径2 路径3.....: 同时创建多个目录

  - touch:

    - 创建文件
    - 语法
      - touch 文件路径: 创建一个文件
      - touch 文件路径1 文件路径2 ... : 创建多个文件

  - cp:

    - 复制文件或文件夹到指定位置
    - 语法
      - cp 被复制的文件路径 目标路径：复制过程中可以改名
      - cp -r 被复制的文件夹路径 目标位置路径：必须加选项-r ，且不能复制到自身及子目录下，-r表示递归

  - mv:

    - 移动文件或文件夹到新的位置
    - 语法
      - mv 需要移动的文件/文件夹 目标位置路径：移动过程中可以改名

  - rm:

    - 删除文件或文件夹
    - 语法：
      - rm 文件路径1 [文件路径2...]：删除文件，有时会有确认提示
      - rm -f 文件路径1  [文件路径2...]：强制删除文件，不会提示
      - rm -r 文件目录路径1 [文件目录路径2...]：删除目录，有时会有确认提示
      - rm -rf 文件目录路径1  [文件目录路径2...]：强制删除目录，不会提示
      - 删除同一目录下有共同特征的项，例如都以bee开头
        - rm -rf bee*

  - vim:

    - 文本编辑器打开文件
    - 语法：
      - vim 文件路径：文件可存在也可以不存在
    - 退出vim:
      - 不改变文件的情况下输入 :q 或 :q!

  - ##### 输出重定向

    - 一般命令的输出都会显示在终端上，有些时候需要将一些命令的结果保存到文件中进行后续的分析/统计，这个时候需要使用输出重定向技术
    - \> : 覆盖输出
    - \>\> : 追加输出
    - 使用格式：指令  [选项]  [操作对象] \>/\>> 文件路径：文件路径可以不存在

  - cat:

    - 语法
      - cat 文件路径：直接输出一个文件
      - cat 待合并的文件路径1 待合并的文件路径2 待合并的文件路径3 ... 待合并的文件路径n > 合并后的文件路径 : 合并文件 

- #### 进阶指令

  - df:
    - 查看磁盘空间
    - 语法
      - df ：普通显示
      - df -h：以可读性较高的形式显示
    
  - free:
    - 查看内存使用情况
    - 语法
      - free [选项]: 选项决定数值单位，-b,-k,-m,-g
      - free -h: 系统决定数值单位，高可读性显示
    
  - head:
    - 查看一个文件的前n行，如果不指定，则默认显示前十行
    - 语法
      - head 文件路径：查看文件前十行
      - head -n 文件路径：n可以是任意数字，查看文件前n行
    
  - tail:
    - 查看一个文件的末尾n行
    - 语法
      - tail 文件路径：查看文件后十行
      - tail -n 文件路径：n可以是任意数字，查看文件后n行
      - tail -f 文件路径：实时查看文件变化，但变化必须是系统对此文件的操作，例如输出重定向，一般用于查看系统日志
    
  - less:
    - 查看文件，以较少的内容进行输出，按下辅助功能键（数字+回车/空格键/上下键）查看更多
    - 语法
      - less 文件路径
    
  - wc:
    - 统计文件内容信息
    - 包含行数、单词数和字节数
    - wc -\[l\]\[w\]\[c\] 文件路径,lwc分别对应行数，单词数，字节数
    
  - ##### date:

    - 表示操作时间日期（读取，设置）

    - 语法：

      - date

      - date +%F : yyyy-mm-dd 

        - 等价于：date "+%Y-%m-%d"

      - date "+%F %T"：yyyy-mm-dd HH:MM:SS

      - date -d "-n day/year/.." "+%F"：向前推n天/年/..

      - date -d "+n day/year/.." "+%F"：向后推n天/年/..

        ![image-20200930133111199](D:\notes\随笔\note-imgs\image-20200930133111199.png)

  - cal:

    - 用来操作日历
    - 语法：
      - cal：直接输出当前月份的日历  等价于 cal -1
      - cal -3：输出上个月加本月加下个月的日历
      - cal -y 年份：输出某一年的所有月份的日历

  - clear:

    - 将终端中之前的信息全部调到屏幕上方，从而达到清空终端的效果

  - ctrl+L:

    - 将终端中之前的信息全部调到屏幕上方，从而达到清空终端的效果

  - ##### 管道符 | :

    - 管道一般可以用于
      - 过滤
        - 不能单独使用，必须配合其他指令一起使用
        - ls /|grep b：过滤出包含b的项
        - 说明：以管道作为分界线，前面的命令有输出，后面需要先输入，然后过滤，最后再输出，前面的输出就是后面的输入
        - grep：主要用于过滤
      - 特殊用法
      - 扩展用法
        - 例如：ls -l | wc -l

- #### 高级指令

  - hostname:

    - 操作主机名（读取和设置）
    - 语法
      - hostname：输出完整的主机名
      - hostname -f：输出当前主机中的FQDN(全限定域名)

  - id:

    - 查看一个用户的一些基本信息（包含用户id,用户组id,附加组id...）,如果不指定用户则显示当前用户
    - 语法
      - id
      - id 用户名

  - whoami:

    - 显示我是谁，即当前登录的用户名，一般用于shell脚本，用于获取当前操作的用户名并记录

  - ##### ps:

    - 用于查看当前服务器的进程相关信息
    - 选项
      - -e：等价于-A ，表示列出全部的进程
      - -f：显示全部的列（显示全字段）
    - 结果字段
      - UID: 进程对应的用户id
      - PID: 进程id
      - PPID: 进程的父进程id，如果一个进程的父进程找不到，则此进程为僵尸进程
      - C: CPU的占用率
      - STIME: 进程启动时间
      - TTY: 终端设备，发起该进程的设备识别符号，如果是?，则代表该进程并不是由终端发起
      - TIME: 进程的执行时间
      - CMD: 该进程的名称或对应的路径

  - top:

    - 主要用于查看进程占用的资源
    - 退出：按下q
    - 字段
      - PID: 进程id
      - USER: 该进程对应的用户
      - PR: 优先级
      - VIRT: 虚拟内存
      - RES: 常驻内存
      - SHR: 共享内存
      - S: 运行状态（S:睡眠，R:运行）
      - %CPU:CPU占用百分比
      - %MEM:内存占用百分比
      - TIME+:执行的时间
      - COMMAND: 进程的名称或路径
    - 一个进程实际使用的内存=常驻内存-共享内存
    - 运行top后的快捷键
      - M:按照内存开销从大到小排序
      - P:按照cpu使用率从高到低排序
      - 1:当有多个cpu时可以按1来展开各个cpu信息

  - du:

    - 查看目录的真实大小
    - 选项
      - -s: 只显示汇总的大小
      - -h:以较高可读性方式显示
    - 语法
      - du [选项] 目录路径

  - find:

    - 用于查找文件
    - 语法格式：find 路径范围 选项 选项值
    - 选项
      - -name: 按照项名进行搜索，支持模糊查找（通配符匹配）
      - -type: 按照项类型搜索
        - f: 文件
        - d:目录

  - service:

    - 用于控制一些软件的服务启动/停止/重启
    - 语法：service 服务名 start/stop/restart

  - kill:

    - 杀死进程及其子进程
    - 语法：kill 进程id

  - ifconfig:

    - 用于操作网卡相关的指令

  - reboot:

    - 重新启动计算机
    - 语法
      - reboot：重启
      - reboot -w： 模拟重启，但不重启

  - shutdown

    - 关机
    - 语法
      - shutdown -h now :立即关机
      - shutdown -h 时间(demo:17:00) ["提示信息"]: 指定时间关机
    - 取消关机
      - 使用shutdown -c或ctrl+c取消
    - 其他几个关机命令
      - init 0
      - halt
      - poweroff

  - uptime

    - 输出计算机的持续在线时间（计算机从开机到现在的时间）

  - uname:

    - 获取计算机操作系统相关信息
    - 语法
      - uname: 获取操作系统类型
      - uname -a :获取全部的系统信息（类型、全部主机名、内核版本、发布时间、开源计划）

  - netstat:

    - 查看网络状态
    - 选项：
      - -t :只列出tcp协议的连接
      - -n: 将地址从字母组合装换成ip地址，将协议换成端口号
      - -l: 过滤出state状态为LISTENING的连接
      - -p:显示发起连接的进程pid和进程名称

  - man:

    - 命令手册
    - 语法 ：man 命令
    - 退出：按下q

```java
//P22 03:31 ----2020年9月30日11:52:35
```

```java
//P29 0:00 ----2020年9月30日17:23:09
```



- #### 权限显示格式(按顺序)

  - -|d: 项类型
    - -：文件
    - d：文件夹

- ##### ~表示当前用户的家目录

- #### 删除光标前后的字符

  - 光标之前的：ctrl+u
  - 光标之后的：ctrl+k(亲测不好使)

- ##### 系统中的用户保存在/etc/passwd目录中

- #### vi编辑器

  - 指所有unix和linux下的标准的编辑器
  - 类似于windows下的notepad

- #### vim编辑器

  - 是vi的升级版本

  - 比vi更适合写代码

  - 重点

    - 光标的移动
    - 模式切换
    - 删除
    - 查找替换
    - 复制
    - 粘贴
    - 撤销命令

  - 三种模式

    - 命令模式

      - 不能对文件直接编辑

      - 可以输入快捷键进行一些操作（删除行、复制行、移动光标、粘贴等）

      - ##### 文件打开后默认进入命令模式

      - 操作

        - 光标移动到
          - 行首：shift+6(字母盘上面的6)
          - 行尾：shift+4(字母盘上面的4)
          - 首行：gg
          - 末行：G
          - 翻屏：
            - 向上：ctrl + b
            - 向下：ctrl + f
        - 复制操作
          - 复制所在行：yy
          - 复制包含所在行的向下N行：Nyy
          - 可视化复制：ctrl + v
          - 移动光标到目标位置后：p
        - 剪切/删除命令
          - 删除/剪切当前光标所在行(下一行上移)：dd
          - 删除/剪切包含当前所在行的向下N行：Ndd
          - 删除/剪切当前光标所在行(下一行不上移)：D
        - 撤销命令
          - 撤销：u或者:u
          - 恢复(恢复之前的撤销)：ctrl+r
        - 快速移动光标
          - 快速移动到N行：NG
          - 向上跳N行：N↑
          - 向下跳N行：N↓
          - 向左跳N字符：N←
          - 向右跳N字符：N→

    - 编辑模式（输入模式）

      - 可以对文件内容进行编辑
      - 进入方式：
        - i:在光标所在字符前开始插入
        - a:在光标所在字符后开始插入
        - o:在光标所在行的下面另起一新行开始插入
        - I:在光标所在行的行首开始插入，如果行首有空格则在空格之后插入
        - A:在光标所在行的行尾开始插入
        - O:在光标所在行的上面另起一行开始插入
        - S:删除光标所在行并开始插入
      - 退出方式：按一下esc

    - 末行模式（尾行模式）

      - 可以在末行输入命令对文件进行操作（搜索、替换、保存、退出、撤销、高亮等）
      - 进入方式：从命令模式按下:
      - 退出方式：
        - 按下esc
        - 连按两下esc
        - 删除末行全部输入字符
      - 保存操作
        - w：保存
        - w 文件路径：另存为到
      - 退出文件
        - q
        - q! ：强制退出，本次做的修改不做保存
      - 调用外部命令
        - !外部命令
      - 搜索/查找命令
        - 输入 ：/关键词
        - 在搜索结果中搜索上/下一个结果：N/n
        - 取消高亮：:nohl
      - 替换指令
        - s/搜索的关键词/新的内容：替换光标所在行的第一处符合条件的内容
        - s/搜索的关键词/新的内容/g：替换光标所在行的全部符合条件的内容
        - %s/搜索的关键词/新的内容：替换所有行的第一处符合条件的内容
        - %s/搜索的关键词/新的内容/g：替换全部行的全部符合条件的内容
      - 显示行号
        - set nu：显示行号（一次性，关闭再打开又没了）
        - set nonu：关闭行号
      - 扩展
        - 同时打开多个文件，使用末行模式切换文件的情景
          - 查看已经打开的文件名称：files
            - %a 标识激活状态的文件，即当前打开的文件
            - #标识上一个打开的文件
          - 切换文件
            - 指定切换文件名称切换：open 文件名
            - 切换到下一个文件：bn
            - 切换到上一个文件：bp
      - 关闭着色显示：syntax off
      - 打开着色显示：syntax on
      - 文件加密：X（大写），再次X会取消加密

    - ##### 模式切换

      ![image-20201004120415961](D:\notes\随笔\note-imgs\image-20201004120415961.png)

  - 打开文件的方式

    - vim 文件路径
    - vim +N 文件路径：打开文件，并且将光标移动到N行
    - vim +/关键词 文件路径：打开文件，并且高亮显示关键词
    - vim 文件路径1 文件路径2 文件路径3

  - 退出方式

    - :q
    - :x（小写）：推荐使用，将保存和退出合为一个命令
      - 如果文件已经被修改，则:x相当于保存并推出（:wq），如果文件没有被修改，则:x相当于直接退出（:q）
      - 每次使用w或相当于使用w时，文件最新修改时间都会被更新
    
  - vim中的计算器

    - 末行模式或编辑模式下ctrl+r,再按=号,输入计算式后回车，末行模式下结果会显示到末行，编辑模式下结果会直接插入光标位置

  - vim的配置

    - 三种配置

      - 文件打开时，末行模式下输入的配置（临时的）

      - 个人配置文件（~/.vimrc）

        - set nu/nonu:控制是否显示行号
        - syntax off/on:控制是否着色

      - 全局配置文件（vim自带,/etc/vim/vimrc或/etc/vimrc）

      - ##### 优先级：末行>个人配置文件>全局配置文件

  - 异常退出后重新打开时可以先把对应的交换文件(.swp)文件删掉，这样就不会有异常提示

- ##### 别名机制

  - 依靠别名映射文件（~/.bashrc）
    - 添加配置的格式：alias 别名='已有命令'
    - 添加配置后重新登录账户后生效

```java
//P37 04:26 ----2020年10月4日13:39:36
```

- ##### 自由服务：不需要用户独立去安装的软件的服务，而是当系统安装好后就可以直接使用的服务（内置）

- #### 运行模式

  - 也叫运行级别
  
- 在linux中存在一个进程，名为init，进程号为1,该进程存在一个对应的配置文件，名为inittab（系统运行级别配置文件，位置/etc/inittab）
  
    - ##### 不是所有的linux版本都有
  
  - 七种运行级别
    - 0：表示关机级别（不要设置成默认级别）
    - 1：单用户模式
    - 2：多用户模式，不带NFS（网络文件系统）
    - 3：完整多用户模式
    - 4：没有被使用的模式（被保留的模式）
    - 5：完整的图形化界面模式
    - 6：重启级别（不要设置成默认级别）
    
  - 相关的几个命令
    - init 0：表示关机
    
    - init 3：表示切换到完整多用户模式（不带桌面）
    
    - init 5：表示切换到图形界面
    
    - init 6：重启电脑
    
    - ##### 这些命令其实都是调用init进程，将数字（运行级别）传递给进程，进程去读取配置文件执行相应的操作
    
    - ##### init指令需要超级管理员权限
    
  - 更改init进程相关配置文件后，重启电脑后会非一次性更改模式

```java
//P42 18:00 ----2020年10月6日14:34:44
```

- #### 用户和用户组管理

  - linux是一个多用户多任务的操作

  - 任何一个要使用系统资源的用户都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统

  - ##### 涉及三个文件

    - /etc/passwd：存储用户的关键信息
    - /etc/group：存储用户组的关键信息
    - /etc/shadow：存储用户的密码信息

  - 用户管理：

    - 添加用户

      - 语法：useradd 选项 用户名

        - -g: 指定用户的用户主组，选项的值可以是用户组的id,也可以是组名
        - -G:指定用户的用户附加组，选项的值可以是用户组的id,也可以是组名
        - -u:指定用户id，系统默认会从500之后按顺序分配用户id,如果不想用系统分配的，可以只用此选项手动指定
        - -m:添加此选项后会自动创建家目录
        - -c:添加注释

      - 在只加-m时，之后useradd之后会执行一系列操作

        - 创建同名的家目录
        - 创建同名的用户组

      - 验证是否创建成功

        - 验证/etc/passwd最后一行是否有账号信息
          - passwd文件数据格式：用户名:密码:用户ID:用户组ID:注释:家目录:解释器 shell
          - 密码位置上一般为x，表示密码占位
          - 注释一般是解释用户是干什么用的
          - 家目录是用户进入系统之后默认进入的位置
          - 解释器shell:等待用户进入系统之后，用户输入指令之后，该解释器会收集用户输入的指令传递给内核处理
        - 验证是否存在对应家目录

      - ##### 查看用户的主组可以查看passwd文件，查看用户的附加组可以查看group文件

    - 修改用户

      - 语法：usermod 选项 用户名
        - -g: 指定用户的用户主组，选项的值可以是用户组的id,也可以是组名
        - -G:指定用户的用户附加组，选项的值可以是用户组的id,也可以是组名
        - -u:指定用户id，系统默认会从500之后按顺序分配用户id,如果不想用系统分配的，可以只用此选项手动指定
        - -l:修改用户名

    - 设置密码

      - 如果一个用户没密码，是默认被锁定的，设置密码后才能登陆
      - 语法：passwd 用户名

    - 切换用户：su 用户名(用户名缺省则切换到root)

    - 删除用户

      - 语法：userdel 选项 用户名
        - -r:连同家目录一起删除
      - 如果用户处于登录状态，则先使用kill命令将其进程全部杀死

    - ##### 关于用户管理的命令，只有passwd是普通用户有权利使用的

  - 用户组管理

    - ##### /etc/group文件结构：组名:密码:用户组ID:组内用户

    - 用户组添加

      - 语法：groupadd 选项 组名
        - -g:类似用户添加里的-u，自定义设置用户组ID，不指定则从500之后递增

    - 用户组修改

      - 语法：groupmod 选项 组名
        - -g:类似用户修改里的-u，自定义设置用户组ID
        - -n:类似于用户修改里的-l，修改用户组名

    - 用户组删除

      - 语法：groupdel 用户组名

      - ##### 如果要删除的组是某个用户的主组，则不允许删除

- #### 网络设置

  - ONBOOT：是否开机启动

  - BOOTPROTO：ip地址分配，DHCP表示动态主机分配协议

  - HWADDR：硬件地址，也叫MAC地址

  - 重启网卡：service network restart，或/etc/init.d/network restart(解释在下一条)

  - ##### 控制单个网卡

    - 关闭单个网卡：ifdown 网卡名
    - 开启单个网卡：ifup 网卡名

- ##### 关于service命令

  - 有的linux版本分支中可能没有service命令，但所有的linux都会有/etc/init.d目录，存放着很多服务的快捷方式
  - 例如直接使用快捷方式重启服务：/etc/init.d/XXX restart

- ##### 创建软链接

  - 指创建文件快捷方式
  - ln -s 文件路径 快捷路径

- #### SSH服务（secure shell,安全外壳协议）

  - 该协议的两个常用的作用
    - 远程连接协议
    - 远程文件传输协议
  - 协议端口
    - 默认22
    - 需要修改的话需要修改配置文件：/etc/ssh/ssh_config
    - 修改时注意
      - 范围：0~65535
      - 不能使用别的服务已经占用的端口
  - 服务启动/停止/重启：service sshd start/stop/restart 或 /etc/init.d/sshd start/stop/restart
  - 远程终端
    - 终端工具主要帮助运维人员连接远程的服务器
    - 常见终端工具
      - Xshell
      - secureCRT
      - Putty
  - 文件传输
    - 可视化的文件传输工具：FileZilla
      - 添加站点：File->站点管理器->新建站点（协议使用SFTP）
      - 新建完成后切换站点并连接
    - 命令行文件传输工具：PSCP
      - ![image-20201007125031898](D:\notes\随笔\note-imgs\image-20201007125031898.png)
      - 只能通过命令行打开

 

```java
//上篇完结，下篇开始
```

